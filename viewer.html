<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tree.txt Explorer</title>
  <style>
    :root { --bg:#0b0f16; --panel:#0f1622; --text:#e9eef6; --muted:#9aa0a6; --accent:#6be0b4; --accent-2:#5fb3f9; --border:#1e2533; --shadow:0 16px 40px rgba(0,0,0,0.35); }
    body { margin:0; font:14px/1.45 "Inter", "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; color:var(--text); background:radial-gradient(140% 120% at 12% 18%, rgba(95,179,249,0.08), transparent 48%), radial-gradient(130% 120% at 82% 0%, rgba(107,224,180,0.08), transparent 50%), linear-gradient(180deg, #0b1018 0%, #0c111a 45%, #0b1018 100%); position:relative; min-height:100vh; overflow-x:hidden; }
    body::before { content:""; position:fixed; inset:-10% -10% auto -10%; height:70%; background:radial-gradient(100% 80% at 50% 10%, rgba(255,255,255,0.05), transparent 55%); filter:blur(60px); opacity:0.6; pointer-events:none; }
    header { display:flex; gap:12px; align-items:center; padding:12px 14px; background:var(--panel); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:10; box-shadow:var(--shadow); backdrop-filter:blur(6px); }
    header h1 { font-size:15px; margin:0 8px 0 0; font-weight:600; color:#fff; }
    input[type="file"] { color:var(--muted); }
    .toolbar { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .toolbar button, .toolbar input[type="text"], .file-btn { background:#0d1320; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:8px 12px; transition:all .15s ease; box-shadow:inset 0 1px 0 rgba(255,255,255,0.03); }
    .toolbar button:hover { border-color:#3a4150; cursor:pointer; transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,0.22); }
    .file-btn { display:inline-flex; align-items:center; gap:8px; font-weight:600; }
    .file-btn .pill { width:10px; height:10px; border-radius:999px; background:var(--accent); box-shadow:0 0 0 4px rgba(107,224,180,0.18); }
    .file-btn:hover { border-color:#3a4150; transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,0.22); cursor:pointer; }
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    .toolbar input[type="text"] { min-width:240px; }
    .toolbar .danger { color:#fca5a5; border-color:#3b2324; }
    #status { margin-left:auto; color:var(--muted); font-size:12px; white-space:nowrap; }
    main { padding:18px 14px 42px; max-width:1200px; margin:0 auto; }
    .hero { display:grid; grid-template-columns:1.1fr 0.9fr; gap:18px; align-items:center; margin-bottom:16px; padding:18px; border:1px solid var(--border); border-radius:16px; background:linear-gradient(135deg, rgba(95,179,249,0.08), rgba(107,224,180,0.12)); box-shadow:var(--shadow); }
    .hero h2 { margin:4px 0 8px; font-size:22px; letter-spacing:0.01em; }
    .hero p { margin:0 0 8px; color:var(--muted); max-width:600px; }
    .eyebrow { text-transform:uppercase; letter-spacing:0.12em; font-size:11px; color:var(--accent-2); margin:0; }
    .chip-row { display:flex; gap:8px; flex-wrap:wrap; margin-top:6px; }
    .chip { display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.08); background:rgba(15,19,32,0.6); color:var(--text); font-size:12px; box-shadow:inset 0 1px 0 rgba(255,255,255,0.05); }
    .chip .dot { width:8px; height:8px; border-radius:50%; background:var(--accent); box-shadow:0 0 0 4px rgba(107,224,180,0.12); }
    .panel { border:1px solid var(--border); border-radius:14px; padding:10px 14px; background:linear-gradient(180deg, #111828, #0d111a); box-shadow:var(--shadow); }
    .tree { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; display:flex; gap:14px; align-items:flex-start; overflow-x:auto; padding-bottom:6px; }
    .tree-block { padding:14px; border:1px solid var(--border); border-radius:14px; background:linear-gradient(180deg, #0f1522, #0c111b); box-shadow:var(--shadow); position:relative; overflow:auto; max-height:70vh; min-width:320px; width:360px; resize:horizontal; flex:0 0 auto; }
    .tree-block::after { content:""; position:absolute; inset:0; background:radial-gradient(120% 80% at 90% 10%, rgba(107,224,180,0.08), transparent 50%); pointer-events:none; }
    .tree-title { display:flex; align-items:center; gap:10px; margin:0 0 8px; color:#d6e3ff; font-weight:700; letter-spacing:0.01em; }
    .tree-title small { color:var(--muted); font-weight:500; }
    details { padding-left:10px; }
    details > summary { list-style:none; cursor:pointer; display:flex; align-items:center; gap:6px; padding:3px 4px; border-radius:5px; }
    details > summary::-webkit-details-marker { display:none; }
    details > summary:hover { background:#182032; }
    .twisty { width:10px; display:inline-block; text-align:center; color:var(--muted); }
    .node-dir { color:#e7f1ff; }
    .node-file { color:#e8eaed; opacity:0.95; padding:2px 4px; border-radius:4px; }
    .node-file:hover { background:#1a1f2a; }
    .hidden { display:none; }
    .match { background:#20314a; outline:1px solid #3f4f66; border-radius:3px; }
    .controls { display:flex; gap:8px; }
    .hint { color:var(--muted); font-size:12px; margin-top:6px; }
    .fuzzy-control { display:flex; align-items:center; gap:8px; padding:8px 12px; border:1px solid var(--border); border-radius:10px; background:#0d1320; color:var(--muted); box-shadow:inset 0 1px 0 rgba(255,255,255,0.03); font-size:12px; }
    .fuzzy-control input[type="range"] { accent-color:var(--accent); width:120px; }
    .fuzzy-control .value { color:var(--text); font-variant-numeric:tabular-nums; min-width:20px; text-align:center; }
  </style>
</head>
  <body>
    <header>
      <h1>Tree Explorer</h1>
      <label class="file-btn" for="fileInput">
        <span class="pill"></span>
        Dateien auswählen
      </label>
      <input id="fileInput" class="sr-only" type="file" accept=".txt" multiple />
      <div class="toolbar">
        <button id="expandAll">Alles aufklappen</button>
        <button id="collapseAll">Alles zuklappen</button>
        <button id="clearAll" class="danger">Alle Bäume entfernen</button>
        <input id="filter" type="text" placeholder="Suchen (Name enthält …)" />
        <label class="fuzzy-control" for="fuzziness">
          Fuzziness
          <input id="fuzziness" type="range" min="0" max="5" step="1" value="0" />
          <span class="value" id="fuzzinessValue">0</span>
        </label>
        <button id="clearFilter">Zurücksetzen</button>
      </div>
      <div id="status">Bereit</div>
    </header>
  <main>
    <section class="hero">
      <div>
        <p class="eyebrow">Multi-Tree Ansicht</p>
        <h2>Mehr Übersicht, weniger Klicken.</h2>
        <p>Dateien oben auswählen oder hier hineinziehen. Mehrere Trees nebeneinander vergleichen, filtern und aufklappen.</p>
        <div class="chip-row">
          <span class="chip"><span class="dot"></span> Drag & Drop</span>
          <span class="chip"><span class="dot"></span> Multi-Load</span>
          <span class="chip"><span class="dot"></span> Live-Filter</span>
        </div>
      </div>
      <div class="panel">
        <div class="hint">Tipp: Große Dateien können etwas länger parsen. Status oben im Header zeigt Fortschritt.</div>
      </div>
    </section>
    <div class="hint">Dateien laden: eine oder mehrere <code>tree.txt</code> (oder ähnliche Ausgaben) oben auswählen oder hier hineinziehen.</div>
    <div id="tree" class="tree" aria-live="polite"></div>
  </main>

  <script src="tree_parser.js"></script>
  <script src="viewer.js"></script>
</body>
</html>
